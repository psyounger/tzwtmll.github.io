# 安装

```
npm i webpack webpack-cil -D
```

```js
webpack // 核心编译工具 对所有的特点功能进行功能支持
	> 提供函数导出，将源码给出，直接传参即可
webpack-cil  // 脚手架，会提供一些命令行命令，帮助我们更好操作webpack
	> webpack命令直接调用核心函数的打包功能，降低心智负担0.0
	> state test 等方法，就无需再启动源码
```

## 实现功能

```
按需打包
分包
模块化
可观察的依赖包
不需要按顺序引入
压缩
在es6没有出来的时候就已经实现模块化 __webpack_require__
webpack会产生一个立即执行函数，将index.js作为入口，封装到一个立即执行函数里面(立即执行函数不会污染全局作用域)
treeshaking
```

# 2. 创建

```js
npm init -y
npx webpack //打包-不指定模式，默认生产模式
npx webpack --mode development //开发模式 自执行
npx webpack --mode prodece //生产模式
```

```js
dist > index.html >
(
  // npx webpack 打包生成 main.js 被html引入 默认出口 dist
  <script src="main.js"></script>
);
```

# 1. entry

```
具有一个或者多个入口
node环境服务器允许,只支持commomjs,导入需要使用require
```

```js
/**
 * @type {import("webpack".Configuration)} //vscode提示
 */
module.exports = {
  mode: "development",
  entry: "./src/index.js", //指定入口(默认也是这个地址)
  output: {
    clean: true, //打包前删除 dist目录，后续会有hash，最新的
  },
};
```

```js
//配置方式
1. 单个字符串
react vue spa框架 single page application 单页面应用
入口只有一个，不写也行
2. 多入口
entry: ["./src/a.js", "./src/b.js"],//不推荐，直接引入另一个js
3. 对象main
  entry: {
    main: {
      filename: "pdd.js", // 输出的文件名字
      import: "./src/index.js", // 入口文件
      runtime: "", // 配置当前这个chunk的运行环境
    },
  },

```

# 2. output

```
  output: {
    clean: true, //打包前删除 dist目录
    path: path.resolve(__dirname, "dist"),
    filename: "my-first-webpack.bundle.js",
  },
```

# 3. loader

```
npm i css-loader style-loader -D
```

```js
1. test 属性，识别出哪些文件会被转换。
2. use 属性，定义出在进行转换时，应该使用哪个 loader。
 module: {
   rules: [
      {
        test: /\.css$/,
        use: [
          { loader: "style-loader" },
          {
            loader: "css-loader",
            options: {
              // 模块化
              modules: true,
            },
          },
        ],
      },
      {
        test: /\.jpg$/,
        type: "asset/resource", //图片
      },
    ],
  },
```

# 4. plugin

```
const HtmlWebpackPlugin = require('html-webpack-plugin');
const webpack = require('webpack'); // 用于访问内置插件


 plugins: [new HtmlWebpackPlugin({ template: './src/index.html' })],
```
